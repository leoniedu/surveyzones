% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/zones.R
\name{.uncap_then_split}
\alias{.uncap_then_split}
\title{Uncapacitated-then-Split Heuristic}
\usage{
.uncap_then_split(
  full_sparse_distances,
  tracts,
  K0,
  D_max,
  max_workload_per_zone,
  candidates,
  max_variables,
  solver,
  max_time,
  rel_tol,
  verbose
)
}
\arguments{
\item{tracts}{A data.frame with columns \code{tract_id} and
\code{expected_service_time}.  Optionally \code{partition_id}.}

\item{K0}{Integer. Initial number of zones (lower bound).}

\item{D_max}{Numeric scalar.  Maximum distance.  Pairs in
\code{sparse_distances} with \code{distance > D_max} are dropped
before solving.}

\item{max_workload_per_zone}{Numeric scalar.  Upper bound on
the sum of \code{expected_service_time} within any zone.  Defaults
to \code{Inf} (uncapacitated).}

\item{candidates}{Character vector of candidate center tract_ids.}

\item{max_variables}{Integer.  Safety limit on the number of
x variables in the MILP.  Aborts if exceeded.}

\item{solver}{Character scalar.  Which MILP solver backend to use.
One of \code{"glpk"} (default), \code{"highs"}, or \code{"cbc"}.  The
corresponding ROI plugin package must be installed (e.g.,
\code{ROI.plugin.highs}).}

\item{max_time}{Numeric scalar.  Maximum seconds to spend solving each
partition. Default \code{300}.}

\item{rel_tol}{Numeric scalar.  Relative tolerance for solver convergence.
Default \code{0.01}.}

\item{verbose}{Logical.  Print solver progress messages? Default \code{FALSE}.}
}
\value{
A list with \code{assignments}, \code{zones}, and \code{diagnostics}.
}
\description{
Solves the uncapacitated p-median (fast), then recursively splits any zone
whose total workload exceeds \code{max_workload_per_zone} into sub-zones.
Each split sub-problem contains only the tracts of the oversized zone, so
it is tiny and solved almost instantly.
}
\keyword{internal}
