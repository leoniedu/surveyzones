% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/representative_points.R
\name{surveyzones_density_point}
\alias{surveyzones_density_point}
\title{Find the highest-density point within each spatial unit}
\usage{
surveyzones_density_point(points, geoid)
}
\arguments{
\item{points}{An sf POINT object with a column \code{n} (weight/count) and a
column identified by \code{geoid}.}

\item{geoid}{<\code{\link[dplyr:dplyr_data_masking]{data-masked}}> Column identifying
the geographic unit (e.g., tract code).}
}
\value{
An sf POINT object with columns \code{geoid} and geometry, one row per
spatial unit, in the same CRS as the input.
}
\description{
Uses kernel density estimation (spatstat) to identify the point with the
highest concentration of households within each geographic unit (e.g., census
tract). This is useful for finding the location where dwellings are most
concentrated.
}
\details{
For units with a single point, that point is returned directly without
invoking spatstat. For units with multiple points, kernel density estimation
is used with a bandwidth of 10\\% of the bounding box extent (minimum 30m).

Coordinates are projected to SIRGAS 2000 / Brazil Polyconic (EPSG:5880) for
the density calculation, then the selected point is returned in the original
CRS.

Requires \code{spatstat.geom} and \code{spatstat.explore} (suggested, not imported).
Install with \code{install.packages(c("spatstat.geom", "spatstat.explore"))}.
}
\examples{
\dontrun{
library(sf)
pts <- st_as_sf(
  data.frame(
    tract = rep(c("A", "B"), each = 10),
    n     = rpois(20, 3),
    lon   = c(rnorm(10, -43.2, 0.01), rnorm(10, -43.3, 0.01)),
    lat   = c(rnorm(10, -22.9, 0.01), rnorm(10, -23.0, 0.01))
  ),
  coords = c("lon", "lat"),
  crs    = 4674
)
surveyzones_density_point(pts, tract)
}

}
\seealso{
\code{\link[=surveyzones_representative_points]{surveyzones_representative_points()}}, \code{\link[=surveyzones_centroid_point]{surveyzones_centroid_point()}}
}
